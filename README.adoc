= Ribose Open Source Software Guidelines

This guide reflects our current development practices we have adopted
for all of our open source projects. This is the
https://github.com/riboseinc/guides[Ribose fork] of the
https://github.com/thoughtbot/guides[thoughtbot guide].
It is mostly similar with some minor adjustments.

If you are contributing to any of our open source projects then it's
highly expected that you follow this guidelines, but if you have some
different opinion about any of the rules then please open
https://github.com/riboseinc/oss-ruby-contribution-guide/issues[an Issue] for
detailed discussion.

High level guidelines:

* Be consistent.
* Don't rewrite existing code to follow this guide.
* Don't violate a guideline without a good reason.
* A reason is good when you can convince a teammate.

== General

* https://github.com/thoughtbot/guides/tree/master/best-practices[Best Practices]
* https://github.com/thoughtbot/guides/tree/master/protocol/git[Git Protocol]
* https://github.com/thoughtbot/guides/tree/master/code-review[Code Review]

== Ruby Projects

For Ruby-based projects, we use
https://github.com/thoughtbot/guides/tree/master/style/ruby[ruby-style-guide],
which is based on the
https://github.com/bbatsov/ruby-style-guide[bbatsov-guide]
with some customized preferences.

Once you start a new project, please copy the contents of
link:for_new_projects/ruby[for_new_projects/ruby] directory to your project
root.  Particularly, this directory contains:

* link:for_new_projects/ruby/.rubocop.yml[Rubocop config]
* link:for_new_projects/ruby/.hound.yml[Hound CI config]
* link:for_new_projects/ruby/.editorconfig[Editor config]

Once everything is setup, https://houndci.com[Hound CI]
should comment on each of the Pull Requests whenever there is a
violations, and please do not merge it until you resolve those.

=== Updating guides

Source guides are kept in `src/rubocop`.  Whenever you update any of those,
please run `rake build:rubocop` and commit generated changes.

=== Automatic Checks

We use several tools to measure code quality in our projects.  The typical setup
is:

Code Climate::
Performs additional code quality analysis (complexity etc).  Optionally,
Code Climate is capable of running Rubocop too, however it is strongly
discouraged to enable that.  Due to frequent breaking changes, style guide must
be written for specific Rubocop version, and our style guide is meant to be
compatible with Hound.  See
https://github.com/riboseinc/oss-guides/pull/3#issuecomment-351883526[this]
for respective discussion.  Moreover, Code Climate is capable of measuring test
coverage, however we prefer CodeCov for that.
CodeCov::
Measures test coverage.
Hound CI::
Runs Rubocop, that is validates code against our style guide.
Travis CI::
Continuous integration.

=== Propagating guides to sister organizations

This repository is mirrored in every GitHub organization that Ribose Inc.
manages in order to workaround Hound CI limitation that organization-wide style
guide must be kept in a repository within that organization.
Mirrors are synchronized via GitHub Actions, specifically `propagate` workflow
defined in this very repository.

In order to set up another mirror, following steps should be performed:

. Create a mirror repository on Github, e.g. `new_organization/oss-guides`.
. Add another "git push" step to `propagate.yml` workflow.
. Add following SSH key as a deploy key to newly created mirror repository,
  and necessarily give it write access.
+
----
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCi4se5HxHHRvKtRiU4/nDy0uobxbDdKyhMco2weBPiczp5/BJXeUWyklHioy7FxaM2zSCtfhsFKCQ/iG8pNT5qaJ+KsCQYOiPhsAad42QYbMY4EbhaDxrLRDnarcrGX1yAmOZXSL1ppUTnlGVOTYPKOrBohTeY4A+QhyYHLpKeNjHjKUFs+7QC3zQtl6sz2Mkh2N4gft78kimAyAqy+W3MLsIgIsjrIIh/qmo8ow9+toEf9bmlhyk/iCEQ0HMYa7h+eF7M9nxiH/Og8NdVEYxz7fYC8WfCKRWoGcCfPImDoqKKdprYNGWVHkGSsEWsCUE24CHujBGU/IFGaSADhkX5gFNmSsps+r8EGG4AuUgE7ZE6rYWCaUmbBMXOAD+BBmBFAL1Roqilq/W4HfPPVLZO1SAyUNKMFZxu0DBeSM3ttIdcetisf5YOAjZ5+XDMKxsbrQ+ZyIqwn7cXPJxeChJImCG+YMn+NLw94jD042uB4+HWOO7oFrUfn68A4SBsdcb7mMVXL5CcPqTQjmRVYmkNGfwGfDOCgXzuDJ8relS9QkjaBgh0lWQAPQjtph83x9WdUiJaS+A0RrMaN9AyRk8E8EQKbFgOXK368l1dy+FsHWsKA/r9EM3auc2TliRyYurLK1jC5x4A/oyshl3N3KR48rpX9Kq4qUMFo589/q68BQ== oss-guides@ribose.com
----
+
You can find information on deploy keys here:
https://developer.github.com/v3/guides/managing-deploy-keys/#deploy-keys.

== Credits

This guide is maintained by https://www.ribose.com[Ribose Inc.]

